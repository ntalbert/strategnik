---
interface Props {
  title: string;
  description: string;
  date: Date;
  category: string;
  slug: string;
  url?: string;
  thumbnail?: string | null;
  featured?: boolean;
  variant?: 'light' | 'dark';
}

const { title, description, date, category, slug, url, thumbnail, featured = false, variant = 'light' } = Astro.props;

const href = url || `/writing/${slug}`;
const isExternal = !!url;

const formattedDate = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short'
});

const isDark = variant === 'dark';
---

<article class="group" data-category={category}>
  <a
    href={href}
    class="block"
    target={isExternal ? '_blank' : undefined}
    rel={isExternal ? 'noopener noreferrer' : undefined}
  >
    <div class="flex items-baseline gap-6">
      <time class={`text-small shrink-0 w-20 font-bold ${isDark ? 'text-blue-bright' : 'text-gray-400'}`} datetime={date.toISOString()}>
        {formattedDate}
      </time>
      <div class="flex-grow">
        <h3 class={`text-body font-bold transition-colors ${isDark ? 'text-white group-hover:text-blue-bright' : 'text-black group-hover:text-accent'}`}>
          {title}
        </h3>
      </div>
      <span class={`group-hover:translate-x-1 transition-all shrink-0 font-bold ${isDark ? 'text-blue-bright group-hover:text-white' : 'text-gray-400 group-hover:text-black'}`}>
        {isExternal ? '↗' : '→'}
      </span>
    </div>
  </a>
</article>

---
interface Props {
  variant?: 'default' | 'compact' | 'inline';
  heading?: string;
  description?: string;
}

const {
  variant = 'default',
  heading = "Get the field notes",
  description = "Observations on B2B SaaS marketing, demand generation, and the physics of growth."
} = Astro.props;

const FORMSPREE_URL = "https://formspree.io/f/xpqlbarl";
---

{variant === 'default' && (
  <div class="section border-t border-gray-800">
    <div class="container-narrow">
      <p class="section-label">Newsletter</p>
      <h2 class="text-display mb-4">{heading}</h2>
      <p class="text-body-lg text-gray-400 mb-8 max-w-prose">{description}</p>
      <form
        id="newsletter-form-default"
        action={FORMSPREE_URL}
        method="POST"
        class="flex flex-col sm:flex-row gap-4 max-w-md"
      >
        <input
          type="email"
          name="email"
          placeholder="you@company.com"
          required
          class="flex-grow px-4 py-3 bg-gray-900 border border-gray-700 text-white placeholder-gray-400
                 focus:border-white focus:outline-none transition-colors"
        />
        <button
          type="submit"
          class="px-6 py-3 bg-white text-black hover:bg-gray-200 transition-colors whitespace-nowrap"
        >
          Subscribe
        </button>
      </form>
      <p id="newsletter-message-default" class="text-small text-gray-400 mt-4">
        No spam. Unsubscribe anytime.
      </p>
    </div>
  </div>
)}

{variant === 'compact' && (
  <div class="section-sm border-t border-gray-800 mt-16">
    <div class="container-narrow">
      <p class="text-small text-gray-400 mb-4">Stay updated</p>
      <form
        id="newsletter-form-compact"
        action={FORMSPREE_URL}
        method="POST"
        class="flex gap-4"
      >
        <input
          type="email"
          name="email"
          placeholder="you@company.com"
          required
          class="flex-grow px-4 py-2 bg-gray-900 border border-gray-700 text-white placeholder-gray-400
                 focus:border-white focus:outline-none transition-colors text-small"
        />
        <button
          type="submit"
          class="text-small text-accent hover:text-white transition-colors whitespace-nowrap"
        >
          Subscribe →
        </button>
      </form>
    </div>
  </div>
)}

{variant === 'inline' && (
  <form
    id="newsletter-form-inline"
    action={FORMSPREE_URL}
    method="POST"
    class="flex gap-4"
  >
    <input
      type="email"
      name="email"
      placeholder="you@company.com"
      required
      class="flex-grow px-4 py-2 bg-gray-900 border border-gray-700 text-white placeholder-gray-400
             focus:border-white focus:outline-none transition-colors text-small"
    />
    <button
      type="submit"
      class="text-small text-accent hover:text-white transition-colors whitespace-nowrap"
    >
      Subscribe →
    </button>
  </form>
)}
